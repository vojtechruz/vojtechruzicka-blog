@use "print";
@use "layout";
:root {
  --font-body: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  --font-heading: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}

body {
  font-family: var(--font-body);
  font-size: clamp(16px, 1.1vw + 12px, 18px);
  line-height: 1.6;
}

h1, h2, h3, h4 {
  font-family: var(--font-heading);
  font-weight: 600;
  line-height: 1.25;
  margin-block: 1.2em 0.6em;
}

/* For accessibility instead of display:none */
.visually-hidden {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

.menu-items, .post-tags {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: 0.5rem;
}

.post-list {
  list-style: none;
}

#post .post-tags {
  display: inline-block;

  li {
    display: inline;
    margin: 0.15rem;
  }

  &::before {
    content: "â€¢";
  }
}

.tag-name::before {
  content: "#";
}

/*
  Visually hidden "Skip to content" link for accessibility.
  Hidden off-screen by default, but becomes visible and accessible
  when focused (e.g. via keyboard navigation). This allows keyboard
  and screen reader users to bypass repeated navigation and jump
  directly to the main content.
*/
.skip-link {
  position: absolute;
  left: -9999px;

  &:focus {
    left: 0;
    top: 0;
    padding: .5rem 1rem;
    background: #000;
    color: #fff;
    z-index: 1000;
  }
}


/* Heading anchor links for markdown-it-anchor */
:where(h1,h2,h3,h4,h5,h6) .header-anchor {
  /* hide by default, show on hover/focus */
  opacity: 0;
  text-decoration: none;
  transition: opacity 0.3s ease-in-out;
}

:where(h1,h2,h3,h4,h5,h6):hover .header-anchor,
:where(h1,h2,h3,h4,h5,h6) .header-anchor:focus,
:where(h1,h2,h3,h4,h5,h6) .header-anchor:focus-visible {
  opacity: 1;
}

/* Ensure the anchor icon does not affect heading line-height too much */
:where(h1,h2,h3,h4,h5,h6) .header-anchor {
  line-height: 1;
}

.header-anchor {
  &::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' width='16' height='16'%3E%3Cpath d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'%3E%3C/path%3E%3C/svg%3E");
    display: inline-block;
    margin-right: 0;
  }
}

.image-wrapper {
  // CSS custom properties for LQIP (Low Quality Image Placeholder) behavior
  --lqip-blur-amount: 60px;
  --lqip-transition-duration: 0.3s;
  --lqip-bg-color: #f0f0f0;

  overflow: hidden;

  // Low Quality Image Placeholder - blurred initially
  .lqip {
    display: block;
    filter: blur(var(--lqip-blur-amount));
    transition: filter var(--lqip-transition-duration) ease-out;
    background-color: var(--lqip-bg-color);
    overflow: hidden;

    // Remove blur once image is loaded
    &[data-loaded] {
      filter: blur(0);
    }
  }
}

article {
  padding-inline: 1.5rem;
  line-height: 1.6;
  font-size: 1rem;
}


//--------------------------------------------------------------- TOC
$toc-indent-step: 1.25rem;
$toc-border-color: #ddd;
$toc-font-size: 0.95rem;

.toc-heading {
  font-weight: 600;
}

.toc {
  font-size: $toc-font-size;
  line-height: 1.4;

  ol {
    list-style: none;
    margin: 0;
    padding: 0;

    li {
      margin: 0.25em 0;
    }

    // second level
    ol {
      margin-top: 0.25em;
      margin-left: $toc-indent-step;
      border-left: 1px solid $toc-border-color;
      padding-left: 0.75em;

      // third level
      ol {
        margin-left: $toc-indent-step * 1.5;
        border-left: 1px solid $toc-border-color;
        padding-left: 0.75em;

        // fourth level
        ol {
          margin-left: $toc-indent-step * 2;
          border-left: 1px solid $toc-border-color;
          padding-left: 0.75em;
        }
      }
    }
  }
}


// TODO this addes hierarchical numbering like 1, 1.1 - maybe use it conditionally only for more complex posts?
//
//.toc {
//  ol {
//    counter-reset: item;
//    list-style: none; /* remove default numbering */
//    padding-left: 1.5em;
//  }
//
//  li {
//    display: block;
//    position: relative;
//  }
//
//  li::before {
//    content: counters(item, ".") " ";
//    counter-increment: item;
//    position: absolute;
//    left: -1.5em;
//    color: #555;
//    font-weight: 500;
//  }
//}


//-------------------TOC END

//-------------Series TOC

.series-toc {
  margin-bottom: 1.5rem;
  font-size: $toc-font-size;

  h4 {
    margin-top: 0;
  }

  ol {
    padding-left: 1.25rem;
  }

  .series-current {
    font-weight: 600;
  }
}
//---------------------- Series TOC end





























////TODO temp
/* Global link styles */
a {
  color: #007acc; /* your brand blue */
  text-decoration: underline;
  transition: color 0.2s;
}

a:hover,
a:focus {
  color: #005fa3; /* slightly darker hover */
}

a:visited {
  color: #5c87b2; /* desaturated tone of same hue */
}