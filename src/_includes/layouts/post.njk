{% extends "layouts/base.njk" %}

{% block head %}
{% set kind = "article" %}
{% include "components/social-metatags.njk" %}
{% include "components/jsonld.njk" %}
{% endblock %}

{% block content %}
<main id="content" class="post content">
  <!-- Reading progress bar -->
  <div id="reading-progress" class="reading-progress" role="progressbar" aria-label="Reading progress" aria-valuemin="0"
    aria-valuemax="100" aria-valuenow="0" hidden>
    <span class="reading-progress__bar" aria-hidden="true"></span>
  </div>
  <article data-pagefind-body>
    <header>
      <h1>{{ title }}</h1>

      <div>
        <span class="date-published">{{date | readableDate}}</span>
        <span class="date-modified">{{dateModified | readableDate}}</span>
        <ul class="post-tags">
          {% for tag in tags %}
          <li><a class="tag-name" href="/tags/{{tag}}">{{tag}}</a></li>
          {% endfor %}
        </ul>
      </div>
      {%if dateModified %}
      <div>Last Updated: {{dateModified | readableDate }}</div>
      {% endif %}


      <img src="./{{featuredImage}}" alt="" aria-hidden="true" class="post-header-featured-image" loading="eager"
        fetchpriority="high" decoding="async">
      <div class="post-header-excerpt">{{excerpt}}</div>
    </header>

    <hr class="post-header-divider" />

    {{ content | safe }}

    <hr class="divider">


  </article>
  <div class="post-footer">
    {% include "components/social-share.njk" %}
    {% include "components/comments.njk" %}
  </div>

  <script src="/scripts/reading-progress.js" defer></script>

</main>
{% endblock %}

{% block sidebar %}
{% include "components/series-toc.njk" %}

{% set tocHtml = content | toc %}
{% if tocHtml and (tocHtml | trim) %}
<nav class="toc" aria-label="Table of contents">
  <p class="toc-heading">Table of contents</p>
  <div class="toc-list">
    {{ tocHtml
    | stripNav
    | safe }}
  </div>
</nav>
<script src="/scripts/toc-scrollspy.js" defer></script>
{% endif %}
{% endblock %}